<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mbed OS Reference: Critical Section HAL functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="mbed-ce_55x55.png"/></td>
  <td id="projectalign">
   <div id="projectname">Mbed OS Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__hal__critical.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Critical Section HAL functions<div class="ingroups"><a class="el" href="group__hal.html">HAL</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga5611a3dc748ee20ac04546d5cdcff486"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__critical.html#ga5611a3dc748ee20ac04546d5cdcff486">hal_critical_section_enter</a> (void)</td></tr>
<tr class="memdesc:ga5611a3dc748ee20ac04546d5cdcff486"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark the start of a critical section.  <a href="group__hal__critical.html#ga5611a3dc748ee20ac04546d5cdcff486">More...</a><br /></td></tr>
<tr class="separator:ga5611a3dc748ee20ac04546d5cdcff486"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa914189c6fa099435baf1e54211e73f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__critical.html#gaa914189c6fa099435baf1e54211e73f9">hal_critical_section_exit</a> (void)</td></tr>
<tr class="memdesc:gaa914189c6fa099435baf1e54211e73f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark the end of a critical section.  <a href="group__hal__critical.html#gaa914189c6fa099435baf1e54211e73f9">More...</a><br /></td></tr>
<tr class="separator:gaa914189c6fa099435baf1e54211e73f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b74f0b326906ec6346864517399a340"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__critical.html#ga7b74f0b326906ec6346864517399a340">hal_in_critical_section</a> (void)</td></tr>
<tr class="memdesc:ga7b74f0b326906ec6346864517399a340"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if the application is currently running in a critical section.  <a href="group__hal__critical.html#ga7b74f0b326906ec6346864517399a340">More...</a><br /></td></tr>
<tr class="separator:ga7b74f0b326906ec6346864517399a340"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga5611a3dc748ee20ac04546d5cdcff486" name="ga5611a3dc748ee20ac04546d5cdcff486"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5611a3dc748ee20ac04546d5cdcff486">&#9670;&#160;</a></span>hal_critical_section_enter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_critical_section_enter </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark the start of a critical section. </p>
<p >This function will be called by <a class="el" href="group__platform__critical.html#ga4d950b3bb0026db2d01df0efd5f18f66" title="Mark the start of a critical section.">core_util_critical_section_enter()</a> each time the application requests to enter a critical section. The purpose of the critical section is to ensure mutual-exclusion synchronisation of the processor by preventing any change in processor control, the default behaviour requires storing the state of interrupts in the system before disabling them.</p>
<p >The critical section code supports nesting. When a thread has entered a critical section it can make additional calls to <a class="el" href="group__platform__critical.html#ga4d950b3bb0026db2d01df0efd5f18f66" title="Mark the start of a critical section.">core_util_critical_section_enter()</a> without deadlocking itself. The critical section driver API tracks the number of nested calls to the critical section. The critical section will only be exited when <a class="el" href="group__platform__critical.html#ga9fbfbd322e41f1f0709332af8c3afc52" title="Mark the end of a critical section.">core_util_critical_section_exit()</a> has been called once for each time it entered the critical section.</p>
<p >On the first call to enter a critical section this function MUST store the state of any interrupts or other application settings it will modify to facilitate the critical section.</p>
<p >Each successive call to enter the critical section MUST ignore storing or modifying any application state.</p>
<p >The default implementation of this function which will save the current state of interrupts before disabling them. This implementation can be found in mbed_critical_section_api.c. This behaviour is can be overridden on a per platform basis by providing a different implementation within the correct targets directory. </p>

</div>
</div>
<a id="gaa914189c6fa099435baf1e54211e73f9" name="gaa914189c6fa099435baf1e54211e73f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa914189c6fa099435baf1e54211e73f9">&#9670;&#160;</a></span>hal_critical_section_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_critical_section_exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark the end of a critical section. </p>
<p >The purpose of this function is to restore any state that was modified upon entering the critical section, allowing other threads or interrupts to change the processor control.</p>
<p >This function will be called once by <a class="el" href="group__platform__critical.html#ga9fbfbd322e41f1f0709332af8c3afc52" title="Mark the end of a critical section.">core_util_critical_section_exit()</a> per critical section on last call to exit. When called, the application MUST restore the saved interrupt/application state that was saved when entering the critical section.</p>
<p >There is a default implementation of this function, it will restore the state of interrupts that were previously saved when hal_critical_section_enter was first called, this implementation can be found in mbed_critical_section_api.c. This behaviour is overridable by providing a different function implementation within the correct targets directory. </p>

</div>
</div>
<a id="ga7b74f0b326906ec6346864517399a340" name="ga7b74f0b326906ec6346864517399a340"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7b74f0b326906ec6346864517399a340">&#9670;&#160;</a></span>hal_in_critical_section()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hal_in_critical_section </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if the application is currently running in a critical section. </p>
<p >The purpose of this function is to inform the caller whether or not the application is running in a critical section. This is done by checking if the current interrupt state has been saved in the underlying implementation, this could also be done by checking the state of the interrupts at the time of calling.</p>
<dl class="section return"><dt>Returns</dt><dd>True if running in a critical section, false if not. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
