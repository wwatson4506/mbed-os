<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mbed OS Reference: sleep hal requirements</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="mbed-ce_55x55.png"/></td>
  <td id="projectalign">
   <div id="projectname">Mbed OS Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__hal__sleep.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">sleep hal requirements<div class="ingroups"><a class="el" href="group__hal.html">HAL</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Low level interface to the sleep mode of a target.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__hal__sleep__tests"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__sleep__tests.html">sleep hal tests</a></td></tr>
<tr class="memdesc:group__hal__sleep__tests"><td class="mdescLeft">&#160;</td><td class="mdescRight">The sleep HAL tests ensure driver conformance to defined behaviour. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga92419ba4b3e68d9ac3ce9f721e2ae0c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__sleep.html#ga92419ba4b3e68d9ac3ce9f721e2ae0c6">hal_sleep</a> (void)</td></tr>
<tr class="memdesc:ga92419ba4b3e68d9ac3ce9f721e2ae0c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the microcontroller to sleep.  <a href="group__hal__sleep.html#ga92419ba4b3e68d9ac3ce9f721e2ae0c6">More...</a><br /></td></tr>
<tr class="separator:ga92419ba4b3e68d9ac3ce9f721e2ae0c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0b3805160f78a15b33d56acaa7335b96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hal__sleep.html#ga0b3805160f78a15b33d56acaa7335b96">hal_deepsleep</a> (void)</td></tr>
<tr class="memdesc:ga0b3805160f78a15b33d56acaa7335b96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the microcontroller to deep sleep.  <a href="group__hal__sleep.html#ga0b3805160f78a15b33d56acaa7335b96">More...</a><br /></td></tr>
<tr class="separator:ga0b3805160f78a15b33d56acaa7335b96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Low level interface to the sleep mode of a target. </p>
<h1><a class="anchor" id="autotoc_md49"></a>
Defined behaviour</h1>
<ul>
<li>Sleep mode<ul>
<li>wake-up time should be less than 10 us - Verified by sleep_usticker_test().</li>
<li>the processor can be woken up by any internal peripheral interrupt - Verified by sleep_usticker_test().</li>
<li>all peripherals operate as in run mode - not verified.</li>
<li>the processor can be woken up by external pin interrupt - not verified.</li>
</ul>
</li>
<li>Deep sleep<ul>
<li>the wake-up time should be less than 10 ms - Verified by deepsleep_lpticker_test().</li>
<li>lp ticker should wake up a target from this mode - Verified by deepsleep_lpticker_test().</li>
<li>RTC should wake up a target from this mode - not verified.</li>
<li>an external interrupt on a pin should wake up a target from this mode - not verified.</li>
<li>a watchdog timer should wake up a target from this mode - not verified.</li>
<li>High-speed clocks are turned off - Verified by deepsleep_high_speed_clocks_turned_off_test().</li>
<li>RTC keeps time - Verified by rtc_sleep_test().</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md50"></a>
Undefined behaviour</h1>
<ul>
<li>peripherals aside from RTC, GPIO and lp ticker result in undefined behaviour in deep sleep. </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga92419ba4b3e68d9ac3ce9f721e2ae0c6" name="ga92419ba4b3e68d9ac3ce9f721e2ae0c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga92419ba4b3e68d9ac3ce9f721e2ae0c6">&#9670;&#160;</a></span>hal_sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_sleep </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send the microcontroller to sleep. </p>
<p >The processor is setup ready for sleep, and sent to sleep. In this mode, the system clock to the core is stopped until a reset or an interrupt occurs. This eliminates dynamic power used by the processor, memory systems and buses. The processor, peripheral and memory state are maintained, and the peripherals continue to work and can generate interrupts.</p>
<p >The processor can be woken up by any internal peripheral interrupt or external pin interrupt.</p>
<p >The wake-up time shall be less than 10 us. </p>

</div>
</div>
<a id="ga0b3805160f78a15b33d56acaa7335b96" name="ga0b3805160f78a15b33d56acaa7335b96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0b3805160f78a15b33d56acaa7335b96">&#9670;&#160;</a></span>hal_deepsleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hal_deepsleep </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send the microcontroller to deep sleep. </p>
<p >This processor is setup ready for deep sleep, and sent to sleep using __WFI(). This mode has the same sleep features as sleep plus it powers down peripherals and high frequency clocks. All state is still maintained.</p>
<p >The processor can only be woken up by low power ticker, RTC, an external interrupt on a pin or a watchdog timer.</p>
<p >The wake-up time shall be less than 10 ms. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
