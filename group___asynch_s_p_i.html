<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mbed OS Reference: Asynchronous SPI Hardware Abstraction Layer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Mbed OS Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group___asynch_s_p_i.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Asynchronous SPI Hardware Abstraction Layer<div class="ingroups"><a class="el" href="group__hal.html">Hal</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0a4874d1bbcfd05d28fda67d7881828b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___asynch_s_p_i.html#ga0a4874d1bbcfd05d28fda67d7881828b">spi_master_transfer</a> (<a class="el" href="structspi__t.html">spi_t</a> *obj, const void *tx, size_t tx_length, void *rx, size_t rx_length, uint8_t bit_width, uint32_t handler, uint32_t event, DMAUsage hint)</td></tr>
<tr class="memdesc:ga0a4874d1bbcfd05d28fda67d7881828b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin the SPI transfer.  <a href="group___asynch_s_p_i.html#ga0a4874d1bbcfd05d28fda67d7881828b">More...</a><br /></td></tr>
<tr class="separator:ga0a4874d1bbcfd05d28fda67d7881828b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga35610f88b1b1af635604a02046af802f"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___asynch_s_p_i.html#ga35610f88b1b1af635604a02046af802f">spi_irq_handler_asynch</a> (<a class="el" href="structspi__t.html">spi_t</a> *obj)</td></tr>
<tr class="memdesc:ga35610f88b1b1af635604a02046af802f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The asynchronous IRQ handler.  <a href="group___asynch_s_p_i.html#ga35610f88b1b1af635604a02046af802f">More...</a><br /></td></tr>
<tr class="separator:ga35610f88b1b1af635604a02046af802f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac2fbdba4be9ef6b76745642e172d6ac5"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___asynch_s_p_i.html#gac2fbdba4be9ef6b76745642e172d6ac5">spi_active</a> (<a class="el" href="structspi__t.html">spi_t</a> *obj)</td></tr>
<tr class="memdesc:gac2fbdba4be9ef6b76745642e172d6ac5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to determine if the SPI peripheral is already in use.  <a href="group___asynch_s_p_i.html#gac2fbdba4be9ef6b76745642e172d6ac5">More...</a><br /></td></tr>
<tr class="separator:gac2fbdba4be9ef6b76745642e172d6ac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad6c4d74d92fb9a77946f6cbb2dd2c4d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___asynch_s_p_i.html#gad6c4d74d92fb9a77946f6cbb2dd2c4d6">spi_abort_asynch</a> (<a class="el" href="structspi__t.html">spi_t</a> *obj)</td></tr>
<tr class="memdesc:gad6c4d74d92fb9a77946f6cbb2dd2c4d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abort an SPI transfer.  <a href="group___asynch_s_p_i.html#gad6c4d74d92fb9a77946f6cbb2dd2c4d6">More...</a><br /></td></tr>
<tr class="separator:gad6c4d74d92fb9a77946f6cbb2dd2c4d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gad6c4d74d92fb9a77946f6cbb2dd2c4d6" name="gad6c4d74d92fb9a77946f6cbb2dd2c4d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad6c4d74d92fb9a77946f6cbb2dd2c4d6">&#9670;&#160;</a></span>spi_abort_asynch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spi_abort_asynch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspi__t.html">spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Abort an SPI transfer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>The SPI peripheral to stop </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac2fbdba4be9ef6b76745642e172d6ac5" name="gac2fbdba4be9ef6b76745642e172d6ac5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac2fbdba4be9ef6b76745642e172d6ac5">&#9670;&#160;</a></span>spi_active()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t spi_active </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspi__t.html">spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempts to determine if the SPI peripheral is already in use. </p>
<p >If a temporary DMA channel has been allocated, peripheral is in use. If a permanent DMA channel has been allocated, check if the DMA channel is in use. If not, proceed as though no DMA channel were allocated. If no DMA channel is allocated, check whether tx and rx buffers have been assigned. For each assigned buffer, check if the corresponding buffer position is less than the buffer length. If buffers do not indicate activity, check if there are any bytes in the FIFOs. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI object to check for activity </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Non-zero if the SPI port is active or zero if it is not. </dd></dl>

</div>
</div>
<a id="ga35610f88b1b1af635604a02046af802f" name="ga35610f88b1b1af635604a02046af802f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga35610f88b1b1af635604a02046af802f">&#9670;&#160;</a></span>spi_irq_handler_asynch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t spi_irq_handler_asynch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspi__t.html">spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The asynchronous IRQ handler. </p>
<p >Reads the received values out of the RX FIFO, writes values into the TX FIFO and checks for transfer termination conditions, such as buffer overflows or transfer complete. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI object that holds the transfer information </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Event flags if a transfer termination condition was met; otherwise 0. </dd></dl>

</div>
</div>
<a id="ga0a4874d1bbcfd05d28fda67d7881828b" name="ga0a4874d1bbcfd05d28fda67d7881828b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0a4874d1bbcfd05d28fda67d7881828b">&#9670;&#160;</a></span>spi_master_transfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spi_master_transfer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structspi__t.html">spi_t</a> *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>tx_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>rx_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bit_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DMAUsage&#160;</td>
          <td class="paramname"><em>hint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Begin the SPI transfer. </p>
<p >Buffer pointers and lengths are specified in tx_buff and rx_buff</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">obj</td><td>The SPI object that holds the transfer information </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx</td><td>The transmit buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_length</td><td>The number of bytes to transmit </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx</td><td>The receive buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_length</td><td>The number of bytes to receive </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bit_width</td><td>The bit width of buffer words </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td>The logical OR of events to be registered </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handler</td><td>SPI interrupt handler </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hint</td><td>A suggestion for how to use DMA with this transfer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
