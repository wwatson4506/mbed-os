<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mbed OS Reference: SingletonPtr&lt; T &gt; Struct Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="mbed-ce_55x55.png"/></td>
  <td id="projectalign">
   <div id="projectname">Mbed OS Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('struct_singleton_ptr.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">SingletonPtr&lt; T &gt; Struct Template Reference<div class="ingroups"><a class="el" href="group__mbed-os-public.html">Public API</a> &raquo; <a class="el" href="group__platform-public-api.html">Platform</a> &raquo; <a class="el" href="group__platform___singleton_ptr.html">SingletonPtr class</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Utility class for creating and using a singleton.  
 <a href="struct_singleton_ptr.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_singleton_ptr_8h_source.html">SingletonPtr.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aed182ab5a4742a6fc2f9fe79773c12e1"><td class="memItemLeft" align="right" valign="top">T *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_singleton_ptr.html#aed182ab5a4742a6fc2f9fe79773c12e1">get</a> () const</td></tr>
<tr class="memdesc:aed182ab5a4742a6fc2f9fe79773c12e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the underlying singleton.  <a href="struct_singleton_ptr.html#aed182ab5a4742a6fc2f9fe79773c12e1">More...</a><br /></td></tr>
<tr class="separator:aed182ab5a4742a6fc2f9fe79773c12e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84e9959608997de8fe4355def47ff45a"><td class="memItemLeft" align="right" valign="top">T *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_singleton_ptr.html#a84e9959608997de8fe4355def47ff45a">operator-&gt;</a> () const</td></tr>
<tr class="memdesc:a84e9959608997de8fe4355def47ff45a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the underlying singleton.  <a href="struct_singleton_ptr.html#a84e9959608997de8fe4355def47ff45a">More...</a><br /></td></tr>
<tr class="separator:a84e9959608997de8fe4355def47ff45a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09eda862da843825d1849dd63af36a2a"><td class="memItemLeft" align="right" valign="top">T &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_singleton_ptr.html#a09eda862da843825d1849dd63af36a2a">operator*</a> () const</td></tr>
<tr class="memdesc:a09eda862da843825d1849dd63af36a2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a reference to the underlying singleton.  <a href="struct_singleton_ptr.html#a09eda862da843825d1849dd63af36a2a">More...</a><br /></td></tr>
<tr class="separator:a09eda862da843825d1849dd63af36a2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4965b1fb31805f409284f35f41e1e099"><td class="memItemLeft" align="right" valign="top">T *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_singleton_ptr.html#a4965b1fb31805f409284f35f41e1e099">get_no_init</a> () const</td></tr>
<tr class="memdesc:a4965b1fb31805f409284f35f41e1e099"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the underlying singleton.  <a href="struct_singleton_ptr.html#a4965b1fb31805f409284f35f41e1e099">More...</a><br /></td></tr>
<tr class="separator:a4965b1fb31805f409284f35f41e1e099"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a80b6032f86a56bec74609034b3246f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_singleton_ptr.html#a3a80b6032f86a56bec74609034b3246f">destroy</a> ()</td></tr>
<tr class="memdesc:a3a80b6032f86a56bec74609034b3246f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy the underlying singleton.  <a href="struct_singleton_ptr.html#a3a80b6032f86a56bec74609034b3246f">More...</a><br /></td></tr>
<tr class="separator:a3a80b6032f86a56bec74609034b3246f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;class T&gt;<br />
struct SingletonPtr&lt; T &gt;</div><p >Utility class for creating and using a singleton. </p>
<dl class="section note"><dt>Note</dt><dd>Synchronization level: Thread safe</dd>
<dd>
: This class is lazily initialized on first use. This class has a constexpr default constructor so if it is not used as a non-local variable it will be garbage collected.</dd>
<dd>
: This class would normally be used in a static standalone context. It does not call the destructor of the wrapped object when it is destroyed, effectively ensuring linker exclusion of the destructor for static objects. If used in another context, such as a member of a normal class wanting "initialize on first-use" semantics on a member, care should be taken to call the destroy method manually if necessary.</dd>
<dd>
: If used as a sub-object of a class, that class's own constructor must be constexpr to achieve its exclusion by the linker when unused. That will require explicit initialization of its other members.</dd>
<dd>
: More detail on initialization: Formerly, <a class="el" href="struct_singleton_ptr.html" title="Utility class for creating and using a singleton.">SingletonPtr</a> had no constructor, so was "zero-initialized" when non-local. So if enclosed in another class with no constructor, the whole thing would be zero-initialized, and linker-excludable. Having no constructor meant <a class="el" href="struct_singleton_ptr.html" title="Utility class for creating and using a singleton.">SingletonPtr</a> was not constexpr, which limited applicability in other contexts. With its new constexpr constructor, it is now "constant-initialized" when non-local. This achieves the same effect as a standalone non-local object, but as a sub-object linker exclusion is now only achieved if the outer object is itself using a constexpr constructor to get constant-initialization. Otherwise, the outer object will be neither zero-initialized nor constant-initialized, so will be "dynamic-initialized", and likely to be left in by the linker. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_singleton_ptr_8h_source.html#l00088">88</a> of file <a class="el" href="_singleton_ptr_8h_source.html">SingletonPtr.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aed182ab5a4742a6fc2f9fe79773c12e1" name="aed182ab5a4742a6fc2f9fe79773c12e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed182ab5a4742a6fc2f9fe79773c12e1">&#9670;&#160;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">T * get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a pointer to the underlying singleton. </p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the singleton </dd></dl>

<p class="definition">Definition at line <a class="el" href="_singleton_ptr_8h_source.html#l00101">101</a> of file <a class="el" href="_singleton_ptr_8h_source.html">SingletonPtr.h</a>.</p>

</div>
</div>
<a id="a84e9959608997de8fe4355def47ff45a" name="a84e9959608997de8fe4355def47ff45a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84e9959608997de8fe4355def47ff45a">&#9670;&#160;</a></span>operator-&gt;()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">T * operator-&gt; </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a pointer to the underlying singleton. </p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the singleton </dd></dl>

<p class="definition">Definition at line <a class="el" href="_singleton_ptr_8h_source.html#l00124">124</a> of file <a class="el" href="_singleton_ptr_8h_source.html">SingletonPtr.h</a>.</p>

</div>
</div>
<a id="a09eda862da843825d1849dd63af36a2a" name="a09eda862da843825d1849dd63af36a2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09eda862da843825d1849dd63af36a2a">&#9670;&#160;</a></span>operator*()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">T &amp; operator* </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a reference to the underlying singleton. </p>
<dl class="section return"><dt>Returns</dt><dd>A reference to the singleton </dd></dl>

<p class="definition">Definition at line <a class="el" href="_singleton_ptr_8h_source.html#l00134">134</a> of file <a class="el" href="_singleton_ptr_8h_source.html">SingletonPtr.h</a>.</p>

</div>
</div>
<a id="a4965b1fb31805f409284f35f41e1e099" name="a4965b1fb31805f409284f35f41e1e099"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4965b1fb31805f409284f35f41e1e099">&#9670;&#160;</a></span>get_no_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">T * get_no_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a pointer to the underlying singleton. </p>
<p >Gets a pointer without initialization - can be used as an optimization when it is known that initialization must have already occurred.</p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the singleton, or NULL if not initialized. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_singleton_ptr_8h_source.html#l00149">149</a> of file <a class="el" href="_singleton_ptr_8h_source.html">SingletonPtr.h</a>.</p>

</div>
</div>
<a id="a3a80b6032f86a56bec74609034b3246f" name="a3a80b6032f86a56bec74609034b3246f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a80b6032f86a56bec74609034b3246f">&#9670;&#160;</a></span>destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy the underlying singleton. </p>
<p >The underlying singleton is never automatically destroyed; this is a potential optimization to avoid destructors being pulled into an embedded image on the exit path, which should never occur. The destructor can be manually invoked via this call.</p>
<p >Unlike construction, this is not thread-safe. After this call, no further operations on the object are permitted.</p>
<p >Is a no-op if the object has not been constructed. </p>

<p class="definition">Definition at line <a class="el" href="_singleton_ptr_8h_source.html#l00167">167</a> of file <a class="el" href="_singleton_ptr_8h_source.html">SingletonPtr.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="struct_singleton_ptr.html">SingletonPtr</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
