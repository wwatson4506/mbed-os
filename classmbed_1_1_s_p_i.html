<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mbed OS Reference: SPI Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="mbed-ce_55x55.png"/></td>
  <td id="projectalign">
   <div id="projectname">Mbed OS Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classmbed_1_1_s_p_i.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle"><div class="title">SPI Class Reference<div class="ingroups"><a class="el" href="group__mbed-os-public.html">Public API</a> &raquo; <a class="el" href="group__drivers-public-api.html">Drivers</a> &raquo; <a class="el" href="group__drivers-public-api-spi.html">SPI</a> &raquo; <a class="el" href="group__drivers___s_p_i.html">SPI class</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>A <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Master, used for communicating with <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> slave devices.  
 <a href="classmbed_1_1_s_p_i.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_s_p_i_8h_source.html">SPI.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for SPI:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmbed_1_1_s_p_i.png" usemap="#SPI_map" alt=""/>
  <map id="SPI_map" name="SPI_map">
<area href="classmbed_1_1_non_copyable.html" alt="NonCopyable&lt; SPI &gt;" shape="rect" coords="0,0,132,24"/>
<area href="class_e_m_w3080_b___s_p_i.html" alt="EMW3080B_SPI" shape="rect" coords="0,112,132,136"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a21d684ae9ab826c863c3d198fb761bad"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#a21d684ae9ab826c863c3d198fb761bad">SPI</a> (PinName mosi, PinName miso, PinName sclk, PinName ssel=NC)</td></tr>
<tr class="memdesc:a21d684ae9ab826c863c3d198fb761bad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> master connected to the specified pins.  <a href="classmbed_1_1_s_p_i.html#a21d684ae9ab826c863c3d198fb761bad">More...</a><br /></td></tr>
<tr class="separator:a21d684ae9ab826c863c3d198fb761bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0616bc0845ecebb978b0913bbe118262"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#a0616bc0845ecebb978b0913bbe118262">SPI</a> (PinName mosi, PinName miso, PinName sclk, PinName ssel, <a class="el" href="structmbed_1_1use__gpio__ssel__t.html">use_gpio_ssel_t</a>)</td></tr>
<tr class="memdesc:a0616bc0845ecebb978b0913bbe118262"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> master connected to the specified pins.  <a href="classmbed_1_1_s_p_i.html#a0616bc0845ecebb978b0913bbe118262">More...</a><br /></td></tr>
<tr class="separator:a0616bc0845ecebb978b0913bbe118262"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab110082bbac4fc7d1a5ceb6942f4b5c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#ab110082bbac4fc7d1a5ceb6942f4b5c0">SPI</a> (const <a class="el" href="structspi__pinmap__t.html">spi_pinmap_t</a> &amp;static_pinmap)</td></tr>
<tr class="memdesc:ab110082bbac4fc7d1a5ceb6942f4b5c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> master connected to the specified pins.  <a href="classmbed_1_1_s_p_i.html#ab110082bbac4fc7d1a5ceb6942f4b5c0">More...</a><br /></td></tr>
<tr class="separator:ab110082bbac4fc7d1a5ceb6942f4b5c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b90429f64efdd3708234ddcc051a7c7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#a3b90429f64efdd3708234ddcc051a7c7">SPI</a> (const <a class="el" href="structspi__pinmap__t.html">spi_pinmap_t</a> &amp;static_pinmap, PinName ssel)</td></tr>
<tr class="memdesc:a3b90429f64efdd3708234ddcc051a7c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> master connected to the specified pins.  <a href="classmbed_1_1_s_p_i.html#a3b90429f64efdd3708234ddcc051a7c7">More...</a><br /></td></tr>
<tr class="separator:a3b90429f64efdd3708234ddcc051a7c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7627faa611c3645626b6b627755fcae7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#a7627faa611c3645626b6b627755fcae7">format</a> (int bits, int mode=0)</td></tr>
<tr class="memdesc:a7627faa611c3645626b6b627755fcae7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the data transmission format.  <a href="classmbed_1_1_s_p_i.html#a7627faa611c3645626b6b627755fcae7">More...</a><br /></td></tr>
<tr class="separator:a7627faa611c3645626b6b627755fcae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4426901f2bcededa2ae9c5e6547b9a2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#a4426901f2bcededa2ae9c5e6547b9a2a">frequency</a> (int hz=1000000)</td></tr>
<tr class="memdesc:a4426901f2bcededa2ae9c5e6547b9a2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> bus clock frequency.  <a href="classmbed_1_1_s_p_i.html#a4426901f2bcededa2ae9c5e6547b9a2a">More...</a><br /></td></tr>
<tr class="separator:a4426901f2bcededa2ae9c5e6547b9a2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a594e0eb0068da0fdc3d57e2d018c1994"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#a594e0eb0068da0fdc3d57e2d018c1994">write</a> (int value)</td></tr>
<tr class="memdesc:a594e0eb0068da0fdc3d57e2d018c1994"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to the <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Slave and return the response.  <a href="classmbed_1_1_s_p_i.html#a594e0eb0068da0fdc3d57e2d018c1994">More...</a><br /></td></tr>
<tr class="separator:a594e0eb0068da0fdc3d57e2d018c1994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed26de49dd850c5014af2a513a6a808a"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#aed26de49dd850c5014af2a513a6a808a">write</a> (const char *tx_buffer, int tx_length, char *rx_buffer, int rx_length)</td></tr>
<tr class="memdesc:aed26de49dd850c5014af2a513a6a808a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to the <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Slave and obtain the response.  <a href="classmbed_1_1_s_p_i.html#aed26de49dd850c5014af2a513a6a808a">More...</a><br /></td></tr>
<tr class="separator:aed26de49dd850c5014af2a513a6a808a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad67df83ace240f53c1276e24a37ff84c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#ad67df83ace240f53c1276e24a37ff84c">lock</a> (void)</td></tr>
<tr class="memdesc:ad67df83ace240f53c1276e24a37ff84c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire exclusive access to this <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> bus.  <a href="classmbed_1_1_s_p_i.html#ad67df83ace240f53c1276e24a37ff84c">More...</a><br /></td></tr>
<tr class="separator:ad67df83ace240f53c1276e24a37ff84c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d882b4e464e4f4bd59eab6c75297bda"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#a5d882b4e464e4f4bd59eab6c75297bda">unlock</a> (void)</td></tr>
<tr class="memdesc:a5d882b4e464e4f4bd59eab6c75297bda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release exclusive access to this <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> bus.  <a href="classmbed_1_1_s_p_i.html#a5d882b4e464e4f4bd59eab6c75297bda">More...</a><br /></td></tr>
<tr class="separator:a5d882b4e464e4f4bd59eab6c75297bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc9e3e51760dbdc066b1d082e496719e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#abc9e3e51760dbdc066b1d082e496719e">select</a> (void)</td></tr>
<tr class="memdesc:abc9e3e51760dbdc066b1d082e496719e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assert the Slave Select line, acquiring exclusive access to this <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> bus.  <a href="classmbed_1_1_s_p_i.html#abc9e3e51760dbdc066b1d082e496719e">More...</a><br /></td></tr>
<tr class="separator:abc9e3e51760dbdc066b1d082e496719e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ae77235b32f5522d5d881baf2c52210"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#a0ae77235b32f5522d5d881baf2c52210">deselect</a> (void)</td></tr>
<tr class="memdesc:a0ae77235b32f5522d5d881baf2c52210"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deassert the Slave Select line, releasing exclusive access to this <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> bus.  <a href="classmbed_1_1_s_p_i.html#a0ae77235b32f5522d5d881baf2c52210">More...</a><br /></td></tr>
<tr class="separator:a0ae77235b32f5522d5d881baf2c52210"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a162d7008eb2691cb49f9f82796a63536"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#a162d7008eb2691cb49f9f82796a63536">set_default_write_value</a> (char data)</td></tr>
<tr class="memdesc:a162d7008eb2691cb49f9f82796a63536"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set default write data.  <a href="classmbed_1_1_s_p_i.html#a162d7008eb2691cb49f9f82796a63536">More...</a><br /></td></tr>
<tr class="separator:a162d7008eb2691cb49f9f82796a63536"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb6befa3793171528f94a42359f80285"><td class="memTemplParams" colspan="2">template&lt;typename Type &gt; </td></tr>
<tr class="memitem:afb6befa3793171528f94a42359f80285"><td class="memTemplItemLeft" align="right" valign="top">int&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#afb6befa3793171528f94a42359f80285">transfer</a> (const Type *tx_buffer, int tx_length, Type *rx_buffer, int rx_length, const <a class="el" href="classmbed_1_1_callback.html">event_callback_t</a> &amp;<a class="el" href="group__platform___callback.html#ga90e30db9c535d448cd949f7f55bb8f31">callback</a>, int event=SPI_EVENT_COMPLETE)</td></tr>
<tr class="memdesc:afb6befa3793171528f94a42359f80285"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start non-blocking <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> transfer using 8bit buffers.  <a href="classmbed_1_1_s_p_i.html#afb6befa3793171528f94a42359f80285">More...</a><br /></td></tr>
<tr class="separator:afb6befa3793171528f94a42359f80285"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90253410d768f60403698f5f383d1931"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#a90253410d768f60403698f5f383d1931">abort_transfer</a> ()</td></tr>
<tr class="memdesc:a90253410d768f60403698f5f383d1931"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abort the on-going <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> transfer, and continue with transfers in the queue, if any.  <a href="classmbed_1_1_s_p_i.html#a90253410d768f60403698f5f383d1931">More...</a><br /></td></tr>
<tr class="separator:a90253410d768f60403698f5f383d1931"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad7b4dd10bf4f4bb5eab6bdd11cebd44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#aad7b4dd10bf4f4bb5eab6bdd11cebd44">clear_transfer_buffer</a> ()</td></tr>
<tr class="memdesc:aad7b4dd10bf4f4bb5eab6bdd11cebd44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the queue of transfers.  <a href="classmbed_1_1_s_p_i.html#aad7b4dd10bf4f4bb5eab6bdd11cebd44">More...</a><br /></td></tr>
<tr class="separator:aad7b4dd10bf4f4bb5eab6bdd11cebd44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7787a47c785a57ddd0307add8be643e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#a7787a47c785a57ddd0307add8be643e1">abort_all_transfers</a> ()</td></tr>
<tr class="memdesc:a7787a47c785a57ddd0307add8be643e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the queue of transfers and abort the on-going transfer.  <a href="classmbed_1_1_s_p_i.html#a7787a47c785a57ddd0307add8be643e1">More...</a><br /></td></tr>
<tr class="separator:a7787a47c785a57ddd0307add8be643e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4885d525858929a6654d0da30dd77955"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_s_p_i.html#a4885d525858929a6654d0da30dd77955">set_dma_usage</a> (DMAUsage usage)</td></tr>
<tr class="memdesc:a4885d525858929a6654d0da30dd77955"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure DMA usage suggestion for non-blocking transfers.  <a href="classmbed_1_1_s_p_i.html#a4885d525858929a6654d0da30dd77955">More...</a><br /></td></tr>
<tr class="separator:a4885d525858929a6654d0da30dd77955"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >A <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Master, used for communicating with <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> slave devices. </p>
<p >The default format is set to 8-bits, mode 0, and a clock frequency of 1MHz.</p>
<p >Most <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> devices will also require Chip Select and Reset signals. These can be controlled using <a class="el" href="classmbed_1_1_digital_out.html" title="A digital output, used for setting the state of a pin.">DigitalOut</a> pins.</p>
<dl class="section note"><dt>Note</dt><dd>Synchronization level: Thread safe</dd></dl>
<p>Example of how to send a byte to a <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> slave and record the response: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;mbed.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classmbed_1_1_s_p_i.html">SPI</a> device(SPI_MOSI, SPI_MISO, SPI_SCLK)</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classmbed_1_1_digital_out.html">DigitalOut</a> chip_select(SPI_CS);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    device.lock();</div>
<div class="line">    chip_select = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> response = device.write(0xFF);</div>
<div class="line"> </div>
<div class="line">    chip_select = 1;</div>
<div class="line">    device.unlock();</div>
<div class="line">}</div>
<div class="ttc" id="aclassmbed_1_1_digital_out_html"><div class="ttname"><a href="classmbed_1_1_digital_out.html">mbed::DigitalOut</a></div><div class="ttdoc">A digital output, used for setting the state of a pin.</div><div class="ttdef"><b>Definition:</b> <a href="_digital_out_8h_source.html#l00051">DigitalOut.h:55</a></div></div>
<div class="ttc" id="aclassmbed_1_1_s_p_i_html"><div class="ttname"><a href="classmbed_1_1_s_p_i.html">mbed::SPI</a></div><div class="ttdoc">A SPI Master, used for communicating with SPI slave devices.</div><div class="ttdef"><b>Definition:</b> <a href="_s_p_i_8h_source.html#l00098">SPI.h:98</a></div></div>
</div><!-- fragment --><p >Example using hardware Chip Select line: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;mbed.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classmbed_1_1_s_p_i.html">SPI</a> device(SPI_MOSI, SPI_MISO, SPI_SCLK, SPI_CS)</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    device.<a class="code hl_function" href="classmbed_1_1_s_p_i.html#ad67df83ace240f53c1276e24a37ff84c">lock</a>();</div>
<div class="line">    <span class="keywordtype">int</span> response = device.write(0xFF);</div>
<div class="line">    device.unlock();</div>
<div class="line">}</div>
<div class="ttc" id="aclassmbed_1_1_s_p_i_html_ad67df83ace240f53c1276e24a37ff84c"><div class="ttname"><a href="classmbed_1_1_s_p_i.html#ad67df83ace240f53c1276e24a37ff84c">mbed::SPI::lock</a></div><div class="ttdeci">virtual void lock(void)</div><div class="ttdoc">Acquire exclusive access to this SPI bus.</div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="_s_p_i_8h_source.html#l00098">98</a> of file <a class="el" href="_s_p_i_8h_source.html">SPI.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a21d684ae9ab826c863c3d198fb761bad" name="a21d684ae9ab826c863c3d198fb761bad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21d684ae9ab826c863c3d198fb761bad">&#9670;&#160;</a></span>SPI() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmbed_1_1_s_p_i.html">SPI</a> </td>
          <td>(</td>
          <td class="paramtype">PinName&#160;</td>
          <td class="paramname"><em>mosi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PinName&#160;</td>
          <td class="paramname"><em>miso</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PinName&#160;</td>
          <td class="paramname"><em>sclk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PinName&#160;</td>
          <td class="paramname"><em>ssel</em> = <code>NC</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> master connected to the specified pins. </p>
<dl class="section note"><dt>Note</dt><dd>This constructor passes the SSEL pin selection to the target HAL. Not all targets support SSEL, so this cannot be relied on in portable code. Portable code should use the alternative constructor that uses GPIO for SSEL.</dd>
<dd>
You can specify mosi or miso as NC if not used.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mosi</td><td><a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Master Out, Slave In pin. </td></tr>
    <tr><td class="paramname">miso</td><td><a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Master In, Slave Out pin. </td></tr>
    <tr><td class="paramname">sclk</td><td><a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Clock pin. </td></tr>
    <tr><td class="paramname">ssel</td><td><a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Chip Select pin. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0616bc0845ecebb978b0913bbe118262" name="a0616bc0845ecebb978b0913bbe118262"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0616bc0845ecebb978b0913bbe118262">&#9670;&#160;</a></span>SPI() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmbed_1_1_s_p_i.html">SPI</a> </td>
          <td>(</td>
          <td class="paramtype">PinName&#160;</td>
          <td class="paramname"><em>mosi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PinName&#160;</td>
          <td class="paramname"><em>miso</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PinName&#160;</td>
          <td class="paramname"><em>sclk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PinName&#160;</td>
          <td class="paramname"><em>ssel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmbed_1_1use__gpio__ssel__t.html">use_gpio_ssel_t</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> master connected to the specified pins. </p>
<dl class="section note"><dt>Note</dt><dd>This constructor manipulates the SSEL pin as a GPIO output using a <a class="el" href="classmbed_1_1_digital_out.html" title="A digital output, used for setting the state of a pin.">DigitalOut</a> object. This should work on any target, and permits the use of <a class="el" href="classmbed_1_1_s_p_i.html#abc9e3e51760dbdc066b1d082e496719e" title="Assert the Slave Select line, acquiring exclusive access to this SPI bus.">select()</a> and <a class="el" href="classmbed_1_1_s_p_i.html#a0ae77235b32f5522d5d881baf2c52210" title="Deassert the Slave Select line, releasing exclusive access to this SPI bus.">deselect()</a> methods to keep the pin asserted between transfers.</dd>
<dd>
You can specify mosi or miso as NC if not used.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mosi</td><td><a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Master Out, Slave In pin. </td></tr>
    <tr><td class="paramname">miso</td><td><a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Master In, Slave Out pin. </td></tr>
    <tr><td class="paramname">sclk</td><td><a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Clock pin. </td></tr>
    <tr><td class="paramname">ssel</td><td><a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Chip Select pin. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab110082bbac4fc7d1a5ceb6942f4b5c0" name="ab110082bbac4fc7d1a5ceb6942f4b5c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab110082bbac4fc7d1a5ceb6942f4b5c0">&#9670;&#160;</a></span>SPI() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmbed_1_1_s_p_i.html">SPI</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structspi__pinmap__t.html">spi_pinmap_t</a> &amp;&#160;</td>
          <td class="paramname"><em>static_pinmap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> master connected to the specified pins. </p>
<dl class="section note"><dt>Note</dt><dd>This constructor passes the SSEL pin selection to the target HAL. Not all targets support SSEL, so this cannot be relied on in portable code. Portable code should use the alternative constructor that uses GPIO for SSEL.</dd>
<dd>
You can specify mosi or miso as NC if not used.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">static_pinmap</td><td>reference to structure which holds static pinmap. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3b90429f64efdd3708234ddcc051a7c7" name="a3b90429f64efdd3708234ddcc051a7c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b90429f64efdd3708234ddcc051a7c7">&#9670;&#160;</a></span>SPI() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmbed_1_1_s_p_i.html">SPI</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structspi__pinmap__t.html">spi_pinmap_t</a> &amp;&#160;</td>
          <td class="paramname"><em>static_pinmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PinName&#160;</td>
          <td class="paramname"><em>ssel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> master connected to the specified pins. </p>
<dl class="section note"><dt>Note</dt><dd>This constructor manipulates the SSEL pin as a GPIO output using a <a class="el" href="classmbed_1_1_digital_out.html" title="A digital output, used for setting the state of a pin.">DigitalOut</a> object. This should work on any target, and permits the use of <a class="el" href="classmbed_1_1_s_p_i.html#abc9e3e51760dbdc066b1d082e496719e" title="Assert the Slave Select line, acquiring exclusive access to this SPI bus.">select()</a> and <a class="el" href="classmbed_1_1_s_p_i.html#a0ae77235b32f5522d5d881baf2c52210" title="Deassert the Slave Select line, releasing exclusive access to this SPI bus.">deselect()</a> methods to keep the pin asserted between transfers.</dd>
<dd>
You can specify mosi or miso as NC if not used.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">static_pinmap</td><td>reference to structure which holds static pinmap. </td></tr>
    <tr><td class="paramname">ssel</td><td><a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Chip Select pin. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7627faa611c3645626b6b627755fcae7" name="a7627faa611c3645626b6b627755fcae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7627faa611c3645626b6b627755fcae7">&#9670;&#160;</a></span>format()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void format </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the data transmission format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bits</td><td>Number of bits per <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> frame (4 - 32, target dependent). </td></tr>
    <tr><td class="paramname">mode</td><td>Clock polarity and phase mode (0 - 3).</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line">mode | POL PHA</div>
<div class="line">-----+--------</div>
<div class="line">  0  |  0   0</div>
<div class="line">  1  |  0   1</div>
<div class="line">  2  |  1   0</div>
<div class="line">  3  |  1   1</div>
</div><!-- fragment --> 
</div>
</div>
<a id="a4426901f2bcededa2ae9c5e6547b9a2a" name="a4426901f2bcededa2ae9c5e6547b9a2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4426901f2bcededa2ae9c5e6547b9a2a">&#9670;&#160;</a></span>frequency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void frequency </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hz</em> = <code>1000000</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> bus clock frequency. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hz</td><td>Clock frequency in Hz (default = 1MHz). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a594e0eb0068da0fdc3d57e2d018c1994" name="a594e0eb0068da0fdc3d57e2d018c1994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a594e0eb0068da0fdc3d57e2d018c1994">&#9670;&#160;</a></span>write() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int write </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write to the <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Slave and return the response. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>Data to be sent to the <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> slave.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Response from the <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> slave. </dd></dl>

</div>
</div>
<a id="aed26de49dd850c5014af2a513a6a808a" name="aed26de49dd850c5014af2a513a6a808a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed26de49dd850c5014af2a513a6a808a">&#9670;&#160;</a></span>write() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int write </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tx_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tx_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>rx_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rx_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write to the <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> Slave and obtain the response. </p>
<p >The total number of bytes sent and received will be the maximum of tx_length and rx_length. The bytes written will be padded with the value 0xff.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tx_buffer</td><td>Pointer to the byte-array of data to write to the device. </td></tr>
    <tr><td class="paramname">tx_length</td><td>Number of bytes to write, may be zero. </td></tr>
    <tr><td class="paramname">rx_buffer</td><td>Pointer to the byte-array of data to read from the device. </td></tr>
    <tr><td class="paramname">rx_length</td><td>Number of bytes to read, may be zero. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes written and read from the device. This is maximum of tx_length and rx_length. </dd></dl>

</div>
</div>
<a id="ad67df83ace240f53c1276e24a37ff84c" name="ad67df83ace240f53c1276e24a37ff84c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad67df83ace240f53c1276e24a37ff84c">&#9670;&#160;</a></span>lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void lock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Acquire exclusive access to this <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> bus. </p>

</div>
</div>
<a id="a5d882b4e464e4f4bd59eab6c75297bda" name="a5d882b4e464e4f4bd59eab6c75297bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d882b4e464e4f4bd59eab6c75297bda">&#9670;&#160;</a></span>unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void unlock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release exclusive access to this <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> bus. </p>

</div>
</div>
<a id="abc9e3e51760dbdc066b1d082e496719e" name="abc9e3e51760dbdc066b1d082e496719e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc9e3e51760dbdc066b1d082e496719e">&#9670;&#160;</a></span>select()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void select </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assert the Slave Select line, acquiring exclusive access to this <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> bus. </p>
<p >If use_gpio_ssel was not passed to the constructor, this only acquires exclusive access; it cannot assert the Slave Select line. </p>

</div>
</div>
<a id="a0ae77235b32f5522d5d881baf2c52210" name="a0ae77235b32f5522d5d881baf2c52210"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ae77235b32f5522d5d881baf2c52210">&#9670;&#160;</a></span>deselect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void deselect </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deassert the Slave Select line, releasing exclusive access to this <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> bus. </p>

</div>
</div>
<a id="a162d7008eb2691cb49f9f82796a63536" name="a162d7008eb2691cb49f9f82796a63536"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a162d7008eb2691cb49f9f82796a63536">&#9670;&#160;</a></span>set_default_write_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_default_write_value </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set default write data. </p>
<p ><a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> requires the master to send some data during a read operation. Different devices may require different default byte values. For example: A SD Card requires default bytes to be 0xFF.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Default character to be transmitted during a read operation. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afb6befa3793171528f94a42359f80285" name="afb6befa3793171528f94a42359f80285"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb6befa3793171528f94a42359f80285">&#9670;&#160;</a></span>transfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int transfer </td>
          <td>(</td>
          <td class="paramtype">const Type *&#160;</td>
          <td class="paramname"><em>tx_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tx_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Type *&#160;</td>
          <td class="paramname"><em>rx_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rx_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmbed_1_1_callback.html">event_callback_t</a> &amp;&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event</em> = <code>SPI_EVENT_COMPLETE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start non-blocking <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> transfer using 8bit buffers. </p>
<p >This function locks the deep sleep until any event has occurred.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tx_buffer</td><td>The TX buffer with data to be transferred. If NULL is passed, the default <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> value is sent. </td></tr>
    <tr><td class="paramname">tx_length</td><td>The length of TX buffer in bytes. </td></tr>
    <tr><td class="paramname">rx_buffer</td><td>The RX buffer which is used for received data. If NULL is passed, received data are ignored. </td></tr>
    <tr><td class="paramname">rx_length</td><td>The length of RX buffer in bytes. </td></tr>
    <tr><td class="paramname">callback</td><td>The event callback function. </td></tr>
    <tr><td class="paramname">event</td><td>The event mask of events to modify. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="spi__api_8h_source.html">spi_api.h</a> for <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> events.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Operation result. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>If the transfer has started. </td></tr>
    <tr><td class="paramname">-1</td><td>If <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> peripheral is busy. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_s_p_i_8h_source.html#l00259">259</a> of file <a class="el" href="_s_p_i_8h_source.html">SPI.h</a>.</p>

</div>
</div>
<a id="a90253410d768f60403698f5f383d1931" name="a90253410d768f60403698f5f383d1931"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90253410d768f60403698f5f383d1931">&#9670;&#160;</a></span>abort_transfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void abort_transfer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Abort the on-going <a class="el" href="classmbed_1_1_s_p_i.html" title="A SPI Master, used for communicating with SPI slave devices.">SPI</a> transfer, and continue with transfers in the queue, if any. </p>

</div>
</div>
<a id="aad7b4dd10bf4f4bb5eab6bdd11cebd44" name="aad7b4dd10bf4f4bb5eab6bdd11cebd44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad7b4dd10bf4f4bb5eab6bdd11cebd44">&#9670;&#160;</a></span>clear_transfer_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clear_transfer_buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the queue of transfers. </p>

</div>
</div>
<a id="a7787a47c785a57ddd0307add8be643e1" name="a7787a47c785a57ddd0307add8be643e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7787a47c785a57ddd0307add8be643e1">&#9670;&#160;</a></span>abort_all_transfers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void abort_all_transfers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the queue of transfers and abort the on-going transfer. </p>

</div>
</div>
<a id="a4885d525858929a6654d0da30dd77955" name="a4885d525858929a6654d0da30dd77955"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4885d525858929a6654d0da30dd77955">&#9670;&#160;</a></span>set_dma_usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int set_dma_usage </td>
          <td>(</td>
          <td class="paramtype">DMAUsage&#160;</td>
          <td class="paramname"><em>usage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure DMA usage suggestion for non-blocking transfers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">usage</td><td>The usage DMA hint for peripheral.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result of the operation. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The usage was set. </td></tr>
    <tr><td class="paramname">-1</td><td>Usage cannot be set as there is an ongoing transaction. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>mbed</b></li><li class="navelem"><a class="el" href="classmbed_1_1_s_p_i.html">SPI</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
