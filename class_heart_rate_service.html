<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mbed OS Reference: HeartRateService Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="mbed-ce_55x55.png"/></td>
  <td id="projectalign">
   <div id="projectname">Mbed OS Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('class_heart_rate_service.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle"><div class="title">HeartRateService Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>BLE Heart Rate Service.  
 <a href="class_heart_rate_service.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_heart_rate_service_8h_source.html">HeartRateService.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_heart_rate_service_1_1_heart_rate_value_bytes.html">HeartRateValueBytes</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a2949098f56d992804cee3be374dfe015"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_heart_rate_service.html#a2949098f56d992804cee3be374dfe015">BodySensorLocation</a> { <br />
&#160;&#160;<a class="el" href="class_heart_rate_service.html#a2949098f56d992804cee3be374dfe015aefcb3c5220e4ac5a266ab3ab00a31581">LOCATION_OTHER</a> = 0
, <a class="el" href="class_heart_rate_service.html#a2949098f56d992804cee3be374dfe015ad80251462c600839e4f53b49f0f64160">LOCATION_CHEST</a> = 1
, <a class="el" href="class_heart_rate_service.html#a2949098f56d992804cee3be374dfe015a910842c0336e9911e73545868231a7cb">LOCATION_WRIST</a> = 2
, <a class="el" href="class_heart_rate_service.html#a2949098f56d992804cee3be374dfe015a2157ca029358e7a2330c0cf8c7998422">LOCATION_FINGER</a>
, <br />
&#160;&#160;<a class="el" href="class_heart_rate_service.html#a2949098f56d992804cee3be374dfe015ad9b4c3167fc217a8289f4a5a449fcc2c">LOCATION_HAND</a>
, <a class="el" href="class_heart_rate_service.html#a2949098f56d992804cee3be374dfe015ada51584c7cdd1d24c568c18c3f0701e9">LOCATION_EAR_LOBE</a>
, <a class="el" href="class_heart_rate_service.html#a2949098f56d992804cee3be374dfe015aba6ad3845dbeb5fb3898f084eab9f8d8">LOCATION_FOOT</a>
<br />
 }</td></tr>
<tr class="memdesc:a2949098f56d992804cee3be374dfe015"><td class="mdescLeft">&#160;</td><td class="mdescRight">Intended location of the heart rate sensor.  <a href="class_heart_rate_service.html#a2949098f56d992804cee3be374dfe015">More...</a><br /></td></tr>
<tr class="separator:a2949098f56d992804cee3be374dfe015"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a150744aa5c1f9526ab22065dcf65156c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_heart_rate_service.html#a150744aa5c1f9526ab22065dcf65156c">HeartRateService</a> (<a class="el" href="classble_1_1_b_l_e.html">BLE</a> &amp;_ble, uint16_t hrmCounter, <a class="el" href="class_heart_rate_service.html#a2949098f56d992804cee3be374dfe015">BodySensorLocation</a> location)</td></tr>
<tr class="memdesc:a150744aa5c1f9526ab22065dcf65156c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct and initialize a heart rate service.  <a href="class_heart_rate_service.html#a150744aa5c1f9526ab22065dcf65156c">More...</a><br /></td></tr>
<tr class="separator:a150744aa5c1f9526ab22065dcf65156c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bb7c5a72b577e5ece42558697772b96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_heart_rate_service.html#a8bb7c5a72b577e5ece42558697772b96">updateHeartRate</a> (uint16_t hrmCounter)</td></tr>
<tr class="memdesc:a8bb7c5a72b577e5ece42558697772b96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the heart rate that the service exposes.  <a href="class_heart_rate_service.html#a8bb7c5a72b577e5ece42558697772b96">More...</a><br /></td></tr>
<tr class="separator:a8bb7c5a72b577e5ece42558697772b96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a969bf9711294a41e9115e43e7f36dff4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_heart_rate_service.html#a969bf9711294a41e9115e43e7f36dff4">setupService</a> ()</td></tr>
<tr class="memdesc:a969bf9711294a41e9115e43e7f36dff4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct and add to the GattServer the heart rate service.  <a href="class_heart_rate_service.html#a969bf9711294a41e9115e43e7f36dff4">More...</a><br /></td></tr>
<tr class="separator:a969bf9711294a41e9115e43e7f36dff4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >BLE Heart Rate Service. </p>
<dl class="section user"><dt>purpose</dt><dd></dd></dl>
<p>Fitness applications use the heart rate service to expose the heart beat per minute measured by a heart rate sensor.</p>
<p >Clients can read the intended location of the sensor and the last heart rate value measured. Additionally, clients can subscribe to server initiated updates of the heart rate value measured by the sensor. The service delivers these updates to the subscribed client in a notification packet.</p>
<p >The subscription mechanism is useful to save power; it avoids unecessary data traffic between the client and the server, which may be induced by polling the value of the heart rate measurement characteristic.</p>
<dl class="section user"><dt>usage</dt><dd></dd></dl>
<p>When this class is instantiated, it adds a heart rate service in the GattServer. The service contains the location of the sensor and the initial value measured by the sensor.</p>
<p >Application code can invoke <a class="el" href="class_heart_rate_service.html#a8bb7c5a72b577e5ece42558697772b96" title="Update the heart rate that the service exposes.">updateHeartRate()</a> when a new heart rate measurement is acquired; this function updates the value of the heart rate measurement characteristic and notifies the new value to subscribed clients.</p>
<dl class="section note"><dt>Note</dt><dd>You can find specification of the heart rate service here: <a href="https://www.bluetooth.com/specifications/gatt">https://www.bluetooth.com/specifications/gatt</a></dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>The service does not expose information related to the sensor contact, the accumulated energy expanded or the interbeat intervals.</dd>
<dd>
The heart rate profile limits the number of instantiations of the heart rate services to one. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_heart_rate_service_8h_source.html#l00067">67</a> of file <a class="el" href="_heart_rate_service_8h_source.html">HeartRateService.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a2949098f56d992804cee3be374dfe015" name="a2949098f56d992804cee3be374dfe015"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2949098f56d992804cee3be374dfe015">&#9670;&#160;</a></span>BodySensorLocation</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_heart_rate_service.html#a2949098f56d992804cee3be374dfe015">BodySensorLocation</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Intended location of the heart rate sensor. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2949098f56d992804cee3be374dfe015aefcb3c5220e4ac5a266ab3ab00a31581" name="a2949098f56d992804cee3be374dfe015aefcb3c5220e4ac5a266ab3ab00a31581"></a>LOCATION_OTHER&#160;</td><td class="fielddoc"><p >Other location. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2949098f56d992804cee3be374dfe015ad80251462c600839e4f53b49f0f64160" name="a2949098f56d992804cee3be374dfe015ad80251462c600839e4f53b49f0f64160"></a>LOCATION_CHEST&#160;</td><td class="fielddoc"><p >Chest. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2949098f56d992804cee3be374dfe015a910842c0336e9911e73545868231a7cb" name="a2949098f56d992804cee3be374dfe015a910842c0336e9911e73545868231a7cb"></a>LOCATION_WRIST&#160;</td><td class="fielddoc"><p >Wrist. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2949098f56d992804cee3be374dfe015a2157ca029358e7a2330c0cf8c7998422" name="a2949098f56d992804cee3be374dfe015a2157ca029358e7a2330c0cf8c7998422"></a>LOCATION_FINGER&#160;</td><td class="fielddoc"><p >Finger. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2949098f56d992804cee3be374dfe015ad9b4c3167fc217a8289f4a5a449fcc2c" name="a2949098f56d992804cee3be374dfe015ad9b4c3167fc217a8289f4a5a449fcc2c"></a>LOCATION_HAND&#160;</td><td class="fielddoc"><p >Hand. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2949098f56d992804cee3be374dfe015ada51584c7cdd1d24c568c18c3f0701e9" name="a2949098f56d992804cee3be374dfe015ada51584c7cdd1d24c568c18c3f0701e9"></a>LOCATION_EAR_LOBE&#160;</td><td class="fielddoc"><p >Earlobe. </p>
</td></tr>
<tr><td class="fieldname"><a id="a2949098f56d992804cee3be374dfe015aba6ad3845dbeb5fb3898f084eab9f8d8" name="a2949098f56d992804cee3be374dfe015aba6ad3845dbeb5fb3898f084eab9f8d8"></a>LOCATION_FOOT&#160;</td><td class="fielddoc"><p >Foot. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="_heart_rate_service_8h_source.html#l00072">72</a> of file <a class="el" href="_heart_rate_service_8h_source.html">HeartRateService.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a150744aa5c1f9526ab22065dcf65156c" name="a150744aa5c1f9526ab22065dcf65156c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a150744aa5c1f9526ab22065dcf65156c">&#9670;&#160;</a></span>HeartRateService()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_heart_rate_service.html">HeartRateService</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classble_1_1_b_l_e.html">BLE</a> &amp;&#160;</td>
          <td class="paramname"><em>_ble</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>hrmCounter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_heart_rate_service.html#a2949098f56d992804cee3be374dfe015">BodySensorLocation</a>&#160;</td>
          <td class="paramname"><em>location</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct and initialize a heart rate service. </p>
<p >The construction process adds a GATT heart rate service in <code>_ble</code> GattServer, sets the value of the heart rate measurement characteristic to <code>hrmCounter</code> and the value of the body sensor location characteristic to <code>location</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_ble</td><td>BLE device that hosts the heart rate service. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hrmCounter</td><td>Heart beats per minute measured by the heart rate sensor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">location</td><td>Intended location of the heart rate sensor. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_heart_rate_service_8h_source.html#l00123">123</a> of file <a class="el" href="_heart_rate_service_8h_source.html">HeartRateService.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a8bb7c5a72b577e5ece42558697772b96" name="a8bb7c5a72b577e5ece42558697772b96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bb7c5a72b577e5ece42558697772b96">&#9670;&#160;</a></span>updateHeartRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateHeartRate </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>hrmCounter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the heart rate that the service exposes. </p>
<p >The server sends a notification of the new value to clients that have subscribed to updates of the heart rate measurement characteristic; clients reading the heart rate measurement characteristic after the update obtain the updated value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hrmCounter</td><td>Heart rate measured in BPM.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section attention"><dt>Attention</dt><dd>This function must be called in the execution context of the BLE stack. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_heart_rate_service_8h_source.html#l00154">154</a> of file <a class="el" href="_heart_rate_service_8h_source.html">HeartRateService.h</a>.</p>

</div>
</div>
<a id="a969bf9711294a41e9115e43e7f36dff4" name="a969bf9711294a41e9115e43e7f36dff4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a969bf9711294a41e9115e43e7f36dff4">&#9670;&#160;</a></span>setupService()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void setupService </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct and add to the GattServer the heart rate service. </p>

<p class="definition">Definition at line <a class="el" href="_heart_rate_service_8h_source.html#l00167">167</a> of file <a class="el" href="_heart_rate_service_8h_source.html">HeartRateService.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_heart_rate_service.html">HeartRateService</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
